
====================================================================================================
FAO FOOD TRADE NETWORK CASE STUDY
====================================================================================================
Dataset: FAO Multiplex Trade Network (2010)
Reference: De Domenico et al., Nature Communications 2015
Network: 214 countries, 364 food products, 318,346 trade connections
====================================================================================================

----------------------------------------------------------------------------------------------------
STEP 1: LOADING FAO DATA
----------------------------------------------------------------------------------------------------

Loaded 214 countries
Loaded 364 product types
Loaded 318346 trade connections

Selecting top 10 products by total trade volume...

Top 10 products by total_weight:
  1. Soybeans: 69221746.00 (921 edges, 136 countries)
  2. Food prep nes: 44372878.00 (6529 edges, 196 countries)
  3. Crude materials: 35947995.00 (6405 edges, 207 countries)
  4. Wine: 29299734.00 (3335 edges, 171 countries)
  5. Oil, palm: 28715901.00 (1211 edges, 155 countries)
  6. Wheat: 27173417.00 (1221 edges, 152 countries)
  7. Rubber natural dry: 25659021.00 (1346 edges, 136 countries)
  8. Maize: 23768824.00 (1609 edges, 154 countries)
  9. Beverages, distilled alcoholic: 23602617.00 (4114 edges, 172 countries)
  10. Meat, cattle, boneless (beef & veal): 23345546.00 (1261 edges, 148 countries)

----------------------------------------------------------------------------------------------------
STEP 2: BUILDING TRADE NETWORK
----------------------------------------------------------------------------------------------------


Aggregated network:
  Nodes: 214
  Edges: 9843
  Density: 0.2159

Network Properties:
  Connected components: 5
  Largest component size: 210 countries

----------------------------------------------------------------------------------------------------
STEP 3: GENERATING TASKS FROM TRADE PATTERNS
----------------------------------------------------------------------------------------------------


Task Statistics:
  Number of tasks: 50
  Average task size: 47.63
  Size range: [5.00, 74.87]

----------------------------------------------------------------------------------------------------
STEP 4: EXPORTING DATA FOR ALGORITHMS
----------------------------------------------------------------------------------------------------


Node ID remapping: 210 nodes
  Original FAO nodes: 214
  Nodes with edges: 210
  Isolated nodes removed: 4
  Original range: [1, 213]
  Remapped range: [0, 209]
Generated files:
  FAO_Trade_Graph.txt
  FAO_Trade_Robots.txt
  FAO_Trade_Tasks.txt

----------------------------------------------------------------------------------------------------
STEP 5: RUNNING BENCHMARK ALGORITHMS
----------------------------------------------------------------------------------------------------


Dataset Statistics:
  Countries (agents): 210
  Tasks: 50
  Mean country capacity: 125.02
  Mean task size: 47.63
  Capacity std: 42.49
  Task size std: 17.99

[1/3] Running CATM (Context-Aware Task Migration)...
greedyRobotRun
  Runtime: 635ms
  Survival Rate: 0.9433
  Total Cost: -12.5197

[2/3] Running KBTM (Key-Based Task Migration)...
greedyPathRun
  Runtime: 782ms
  Survival Rate: 0.9921
  Total Cost: 0.0000

[3/3] Running HCTM-MPF (Proposed Multi-layer Potential Field)...
mpfmRun
Traceback (most recent call last):
  File "/home/user/tist/cascadingFailuresTaskMigration_python/run_fao_case_study.py", line 308, in <module>
    main()
  File "/home/user/tist/cascadingFailuresTaskMigration_python/run_fao_case_study.py", line 292, in main
    results = run_fao_experiment(**config)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/user/tist/cascadingFailuresTaskMigration_python/run_fao_case_study.py", line 197, in run_fao_experiment
    result_mpftm = mpftm.mpfm_run()
                   ^^^^^^^^^^^^^^^^
  File "/home/user/tist/cascadingFailuresTaskMigration_python/MPFTM/mpftm.py", line 55, in mpfm_run
    self._ad_leaders_selection(self.id_to_groups, self.id_to_robots, self.arc_graph, max_size)
  File "/home/user/tist/cascadingFailuresTaskMigration_python/MPFTM/mpftm.py", line 111, in _ad_leaders_selection
    group.ad_leaders = finder.find_ad_leaders(
                       ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/user/tist/cascadingFailuresTaskMigration_python/MPFTM/finder_ad_leaders.py", line 48, in find_ad_leaders
    iscore = (betweenness_centrality.get(robot_id, 0.0) + 1) / \
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
ZeroDivisionError: float division by zero
